# å¯¹è±¡

åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡çš„é€šå¸¸æ–¹å¼æ˜¯åˆ›å»º *Object* çš„ä¸€ä¸ªæ–°å®ä¾‹ï¼Œç„¶åå†ç»™å®ƒæ·»åŠ å±æ€§å’Œæ–¹æ³•

```js
const person = new Object()

person.name = "Nicholas"
person.job = "Software Engineer"
person.age = 29
person.sayName = function(){
    console.log(this.name)
}
```

ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡å­—é¢é‡

```js
const person = {
    name: "Nicholas",
    job: "Software Engineer",
    age: 29,
    sayName(){
        console.log(this.name)
    }  
}
```



## å±æ€§çš„ç±»å‹

ä¸ºäº†å°†æŸä¸ªç‰¹æ€§è¡¨ç¤ºä¸ºå†…éƒ¨ç‰¹æ€§ï¼Œè§„èŒƒä¼šç”¨ä¸¤ä¸ªä¸­æ‹¬å·æŠŠç‰¹æ€§åç§°åŒ…æ‹¬èµ·æ¥ï¼Œæ¯”å¦‚

```js
[[Enumerable]]
```

å±æ€§åˆ†ä¸ºä¸¤ç§

1. æ•°æ®å±æ€§

2. è®¿é—®å™¨å±æ€§

### æ•°æ®å±æ€§

æ•°æ®å±æ€§åŒ…å«ä¸€ä¸ªä¿å­˜æ•°æ®å€¼çš„ä½ç½®ï¼›æ•°æ®å±æ€§æœ‰4ä¸ªç‰¹æ€§æè¿°å®ƒä»¬çš„è¡Œä¸º


- *[[ Configurable ]]*

  - é»˜è®¤ä¸º *true*

  - è¡¨ç¤ºå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡ *delete* åˆ é™¤å¹¶é‡æ–°å®šä¹‰

  - è¡¨ç¤ºæ˜¯å¦å¯ä»¥ä¿®æ”¹å®ƒçš„ç‰¹æ€§

  - è¡¨ç¤ºæ˜¯å¦å¯ä»¥æŠŠå®ƒæ”¹ä¸ºè®¿é—®å™¨å±æ€§

- *[[ Enumerable ]]*

  - é»˜è®¤ä¸º *true*

  - è¡¨ç¤ºå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡ *for-in* å¾ªç¯è¿”å›

- *[[ Writable ]]*

  - é»˜è®¤ä¸º *true*

  - è¡¨ç¤ºå±æ€§çš„å€¼æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹

- *[[ Value ]]*

  - é»˜è®¤ä¸º *undefined*

  - åŒ…å«å±æ€§å®é™…çš„å€¼



### ä¸å¯å˜æ€§çº§åˆ«

- å¯¹è±¡å¸¸é‡ â€”â€” ä¸å¯ä¿®æ”¹ã€é‡å®šä¹‰æˆ–åˆ é™¤

  - *writable: false*

  - *configurable: false*

    ```js
    var object = {}
    
    Object.defineProperty(object,'FAVORITE_NUMBER',{
        configurable :false,
        writable: false,
        value: 1,
    })
    ```

- ç¦æ­¢æ‰©å±• â€”â€” *Object.preventExtension( )*ï¼Œç¦æ­¢å¯¹è±¡æ·»åŠ æ–°å±æ€§å¹¶ä¿ç•™å·²æœ‰å±æ€§

    ```js
    var object = {
        a: 2
    }
    
    Object.preventExtension(object)
    
    object.b = 3// è¯•å›¾ä¸ºobjectå¯¹è±¡æ·»åŠ bå±æ€§å¹¶èµ‹å€¼ä¸º3
    console.log(object.b)// undefined â€”â€” æ·»åŠ æ–°å±æ€§bå¤±    è´¥
    ```

- å¯†å° â€”â€” *Object.seal( )*

  - ç›¸å½“äºåœ¨å¯¹è±¡ä¸Šå…ˆè°ƒç”¨ *Object.preventExtension( )*
  
  - å¹¶å°†å¯¹è±¡çš„æ‰€æœ‰ç°æœ‰å±æ€§æ ‡è®°ä¸º *configurable: false*

- å†»ç»“ â€”â€” *Object.freeze( )*

  - ç›¸å½“äºåœ¨å¯¹è±¡ä¸Šå…ˆè°ƒç”¨ *Object.seal( )*
  
  - å¹¶å°†å¯¹è±¡çš„æ‰€æœ‰â€œæ•°æ®è®¿é—®â€çš„å±æ€§æ ‡è®°ä¸º *writable: false*

### è®¿é—®å™¨å±æ€§

è®¿é—®å™¨å±æ€§ä¸åŒ…å«æ•°æ®å€¼ï¼Œä»–ä»¬åŒ…å«ä¸€ä¸ªè·å–( *getter* )å‡½æ•°å’Œä¸€ä¸ªè®¾ç½®( *setter* )å‡½æ•°

- åœ¨è¯»å–è®¿é—®å™¨å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨è·å–å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„è´£ä»»å°±æ˜¯è¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„å€¼

- åœ¨å†™å…¥è®¿é—®å™¨å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨è®¾ç½®å‡½æ•°å¹¶ä¼ å…¥æ–°å€¼ï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»å†³å®šå¯¹æ•°æ®åšå‡ºä»€ä¹ˆä¿®æ”¹

è®¿é—®å™¨å±æ€§æœ‰4ä¸ªç‰¹æ€§æè¿°ä»–ä»¬çš„è¡Œä¸º


- *[[Configurable]]*

  - é»˜è®¤ä¸º *true*

  - è¡¨ç¤ºå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡ *delete* åˆ é™¤å¹¶é‡æ–°å®šä¹‰

  - è¡¨ç¤ºæ˜¯å¦å¯ä»¥ä¿®æ”¹å®ƒçš„ç‰¹æ€§

  - è¡¨ç¤ºæ˜¯å¦å¯ä»¥æŠŠå®ƒæ”¹ä¸ºè®¿é—®å™¨å±æ€§

- *[[Enumerable]]*

  - é»˜è®¤ä¸º *true*

  - è¡¨ç¤ºå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡ *for-in* å¾ªç¯è¿”å›

- *[[Get]]* â€”â€” è·å–å‡½æ•°ï¼Œåœ¨è¯»å–å±æ€§æ—¶è°ƒç”¨ï¼›é»˜è®¤å€¼ä¸º *undefined*

- *[[Set]]* â€”â€” è®¾ç½®å‡½æ•°ï¼Œåœ¨å†™å…¥å±æ€§æ—¶è°ƒç”¨ï¼›é»˜è®¤å€¼ä¸º *undefined*

è®¿é—®å™¨å±æ€§æ˜¯ä¸èƒ½ç›´æ¥å®šä¹‰çš„ï¼Œå¿…é¡»ä½¿ç”¨ *Object.defineProperty( )*

```js
let book = {
    year_: 2017,
    edition: 1
}

Object.defineProperty(book, "year", {
    get() {
        return year_
    },
    set(newValue) {
        if(newValue > 2017){
            this.year_ = newValue
            this.edition += newValue - 2017
        }
    },
})
book.year = 2018
console.log(book.edition)// 2
```

è·å–å‡½æ•°å’Œè®¾ç½®å‡½æ•°ä¸ä¸€å®šéƒ½è¦å®šä¹‰

- åªå®šä¹‰ *getter* å‡½æ•°æ„å‘³ç€å±æ€§æ˜¯åªè¯»çš„ï¼Œå°è¯•ä¿®æ”¹å±æ€§ä¼šè¢«å¿½ç•¥ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ›å‡ºé”™è¯¯ï¼‰

- åªå®šä¹‰ *setter* å‡½æ•°æ„å‘³ç€å±æ€§æ˜¯ä¸èƒ½è¯»å–çš„ï¼Œè¯»å–å±æ€§ä¼šè¿”å› undefinedï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ›å‡ºé”™è¯¯ï¼‰

åœ¨ä¸æ”¯æŒ *Object.defineProperty( )* çš„æµè§ˆå™¨ä¸­æ²¡æœ‰åŠæ³•ä¿®æ”¹ *[[Configurable]]* å’Œ *[[Enumerable]]*



## å®šä¹‰å±æ€§

#### å®šä¹‰å•ä¸ªå±æ€§

è¦ä¿®æ”¹å±æ€§çš„é»˜è®¤ç‰¹æ€§ï¼Œå¿…é¡»ä½¿ç”¨ *Object.defineProperty( )*ï¼Œæ¥æ”¶ä¸‰ä¸ªå‚æ•°

1. è¦ç»™å…¶æ·»åŠ å±æ€§çš„å¯¹è±¡

2. å±æ€§çš„åç§°

3. ä¸€ä¸ªæè¿°ç¬¦å¯¹è±¡ï¼Œå¯åŒ…å« *configurable*ã€*enumerable*ã€*writable* å’Œ *value*

```js
let person = {}
Object.defineProperty(person,"name",{
    writable: false,
    value: "Nicholas"
})

console.log(person.name) //  "Nicholas"
person.name = "Grey" //  è¯•å›¾ä¿®æ”¹nameå±æ€§çš„å€¼
console.log(person.name) //  "Nicholas"
```

ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°è¯•ä¿®æ”¹åªè¯»å±æ€§çš„å€¼ä¼šæŠ›å‡ºé”™è¯¯

ç±»ä¼¼çš„è§„åˆ™ä¹Ÿé€‚ç”¨äºåˆ›å»ºä¸å¯é…ç½®çš„å±æ€§

```js
let person = {}
Object.defineProperty(person,"name",{
    configurable: false,
    value: "Nicholas"
})

console.log(person.name)// "Nicholas"
delete person.name// è¯•å›¾åˆ é™¤nameå±æ€§
console.log(person.name)// "Nicholas"
```

ğŸŒŸä¸€ä¸ªå±æ€§è¢«å®šä¹‰ä¸ºä¸å¯é…ç½®ä¹‹åï¼Œå°±ä¸èƒ½å†å˜å›å¯é…ç½®çš„äº†ï¼›å†æ¬¡è°ƒç”¨ *Object.defineProperty( )* å¹¶ä¿®æ”¹ä»»ä½•é *writable* å±æ€§ä¼šå¯¼è‡´é”™è¯¯

```js
let person = {}
Object.defineProperty(person,"name",{
    configurable: false,
    value: "Nicholas"
})

// æŠ›å‡ºé”™è¯¯
Object.defineProperty(person,"name",{
    configurable:true,
    value:"Nicholas"
})
```

â­åœ¨è°ƒç”¨ *Object.defineProperty( )* æ—¶ï¼Œ*configurable*ã€*enumerable* å’Œ *writable* çš„å€¼å¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤ä¸º *false*


#### å®šä¹‰å¤šä¸ªå±æ€§

*ECMASCript* æä¾›äº† *Object.defineProperties( )* æ–¹æ³•ï¼Œé€šè¿‡å¤šä¸ªæè¿°ç¬¦ä¸€æ¬¡æ€§å®šä¹‰å¤šä¸ªå±æ€§

å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

- è¦ä¸ºä¹‹æ·»åŠ å±æ€§æˆ–ä¿®æ”¹å±æ€§çš„å¯¹è±¡

- å¦ä¸€ä¸ªæè¿°ç¬¦å¯¹è±¡ï¼Œå…¶å±æ€§ä¸è¦æ·»åŠ æˆ–ä¿®æ”¹çš„å±æ€§ä¸€ä¸€å¯¹åº”

```js
let book = {}
Object.defineProperties(book,{
    year_: {
        value: 2017
    },
    edition: {
        value: 1
    },
    year: {
        get(){
            return this.year_
        },
        set(newValue){
            if(newValue > 2017){
                this.year_ = newValue
                this.edition += newValue - 2017
            }
        }
    }
})
```

## è¯»å–å±æ€§çš„ç‰¹æ€§

#### è¯»å–æŒ‡å®šå±æ€§çš„ç‰¹æ€§

ä½¿ç”¨ *Object.getOwnPropertyDescriptor( )* æ–¹æ³•å¯ä»¥å–å¾—æŒ‡å®šå±æ€§çš„å±æ€§æè¿°ç¬¦ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°

- å±æ€§æ‰€åœ¨çš„å¯¹è±¡

- è¦å–å¾—å…¶æè¿°ç¬¦çš„å±æ€§å

è¿™ä¸ªæ–¹æ³•è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡

- å¯¹äºè®¿é—®å™¨å±æ€§åŒ…å« *configurable*ã€*enumerable*ã€*get* å’Œ *set* ç‰¹æ€§

- å¯¹äºæ•°æ®å±æ€§åŒ…å« *configurable*ã€*enumerable*ã€*writable* å’Œ *value* ç‰¹æ€§ 

```js
let book = {}
Object.defineProperties(book, {
    year_: {
        value: 2017
    },
    edition: {
        value: 1
    },
    year: {
        get(){
            return this.year_
        },
        set(newValue){
            if(newValue > 2017){
                this.year_ = newValue
                this.edition += newValue-2017
            }
        }
    }
})

let descriptor1 = Object.getOwnPropertyDescriptor(book,"year_")
console.log(descriptor1.value)// 2017
console.log(descriptor1.configurable)// false
console.log(typeof descriptor1.get)// "undefined"

let descriptor2 = Object.getOwnPropertyDescriptor(book,"year")
console.log(descriptor2.value)// undefined
console.log(descriptor2.enumerable)// false
console.log(typeof descriptor2.get)// "function"
```

#### è¯»å–æ‰€æœ‰è‡ªæœ‰å±æ€§çš„ç‰¹æ€§

*Object.getOwnPropertyDescriptors( )* é™æ€æ–¹æ³•ä¼šåœ¨æ¯ä¸ªè‡ªæœ‰å±æ€§ä¸Šè°ƒç”¨ *Object.defineProperties( )* æ–¹æ³•å¹¶åœ¨ä¸€ä¸ªæ–°å¯¹è±¡ä¸­è¿”å›å®ƒä»¬

```js
let book = {}
Object.defineProperties(book,{
    year_: {
        value: 2017
    },
    edition: {
        value: 1
    },
    year: {
        get(){
            return this.year_
        },
        set(newValue){
            if(newValue>2017){
                this.year_ = newValue
                this.edition += newValue-2017
            }
        }
    }
})
console.log(Object.getOwnPropertyDescriptors(book))
/*
edition: {
    value: 1, 
    writable: false,
    numerable: false,
    configurable: false
    }

year: {
    enumerable: false, 
    configurable: false, 
    get: Æ’, 
    set: Æ’
    }

year_: {
    value: 2017, 
    writable: false, 
    enumerable: false, 
    configurable: false
    }
*/
```



## åˆå¹¶å¯¹è±¡

*ES6* ä¸“é—¨ä¸ºåˆå¹¶å¯¹è±¡æä¾›äº† *Object.assign( )* æ–¹æ³•ï¼Œæ¥æ”¶ ä¸¤ä¸ªå‚æ•°ï¼š

- ä¸€ä¸ªç›®æ ‡å¯¹è±¡

- ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡

ç„¶åå°†è¯¥æ¯ä¸ªæºå¯¹è±¡ä¸­æŒ‡å®šå±æ€§ä¼šè¢«å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡

- å¯æšä¸¾å±æ€§ â€”â€” *Object.propertyIsEnumerable( )* è¿”å› *true* 

- è‡ªæœ‰å±æ€§ â€”â€” *Object.hasOwnProperty( )* è¿”å› true

- ä»¥å­—ç¬¦ä¸²å’Œç¬¦å·ä¸ºé”®çš„å±æ€§ä¼šè¢«å¤åˆ¶

å¯¹æ¯ä¸ªç¬¦åˆæ¡ä»¶çš„å±æ€§

- ä½¿ç”¨æºå¯¹è±¡ä¸Šçš„ *[[Get]]* å–å¾—å±æ€§çš„å€¼

- ä½¿ç”¨ç›®æ ‡å¯¹è±¡ä¸Šçš„ *[[Set]]* è®¾ç½®å±æ€§çš„å€¼

```js
let dest, src, result

dest = {}
src = {
    id: 'src'
}

result = Object.assign(dest,src)
// Object.assign()ä¿®æ”¹ç›®æ ‡å¯¹è±¡ï¼Œä¹Ÿä¼šè¿”å›ä¿®æ”¹åçš„ç›®æ ‡å¯¹è±¡

console.log(dest === result)// true
console.log(dest !== src)// true
console.log(result)// {id: 'src'}
console.log(dest)// {id: 'src'}

dest = {}
result = Object.assign(dest, {a: 'foo'}, {b: 'bar'})
console.log(result)// {a: "foo", b: "bar"}

dest = {
    set a(val){
        console.log('è°ƒç”¨srcçš„è·å–æ–¹æ³•')
    }
}

src = {
    get a(){
        console.log('è°ƒç”¨destçš„è®¾ç½®æ–¹æ³•å¹¶ä¼ å…¥foo')
        return 'foo'
    }
}
Object.assign(dest,src)
console.log(dest)
// è°ƒç”¨destçš„è®¾ç½®æ–¹æ³•å¹¶ä¼ å…¥foo
// è°ƒç”¨srcçš„è·å–æ–¹æ³•
// { a: [Setter] }
```



*Object.assign( )* å®é™…ä¸Šå¯¹æ¯ä¸ªæºå¯¹è±¡æ‰§è¡Œçš„æ˜¯æµ…å¤åˆ¶

- å¦‚æœå¤šä¸ªæºå¯¹è±¡æœ‰ç›¸åŒçš„å±æ€§åˆ™ä½¿ç”¨æœ€åä¸€ä¸ªå¤åˆ¶çš„å€¼

  ```js
  const dest = {id: 'dest'}
  const result = Object.assign(dest,{id:'src1',a:'foo'},{id:'src2',b:'bar'})
  
  console.log(result)// {id: "src2", a: "foo", b: "bar"}
  ```

- é‡å¤çš„å±æ€§ä¼šä¾æ¬¡è¢«è¦†ç›–

  ```js
  const dest = {
  	set id(x){
          console.log(x)
      }
  }
  Object.assign(dest, {id: 'first'}, {id: 'second'}, {id: 'third'})
  // first
  // second
  // third
  ```

- ç±»å‹ä¸ºå¯¹è±¡çš„å±æ€§å€¼åªä¼šå¤åˆ¶å…¶å¼•ç”¨

  ```js
  const dest = {}
  const src = {a: {}}
  
  Object.assign(dest, src)
  console.log(dest.a === src.a)// true
  ```

- å¦‚æœèµ‹å€¼æœŸé—´å‡ºé”™ï¼Œåˆ™æ“ä½œä¼šä¸­æ­¢å¹¶é€€å‡ºï¼ŒåŒæ—¶æŠ›å‡ºé”™è¯¯ï¼›æŠ›å‡ºé”™è¯¯ä¹‹å‰ï¼Œç›®æ ‡å¯¹è±¡ä¸Šå·²ç»å®Œæˆçš„ä¿®æ”¹ä¼šç»§ç»­å­˜åœ¨

  ```js
  const dest = {}
  const src = {
      a: 'foo',
      get b(){
          throw new Error()
      },
      c:'bar'
  }
  
  try {
      Object.assign(dest,src)
  }catch(e) {
      // 
  }
  
  console.log(dest)// {a: "foo"}
  ```

  



## å±æ€§æšä¸¾ç›¸å…³

#### æ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨

- *in* æ“ä½œç¬¦ â€”â€” æ£€æŸ¥å±æ€§æ˜¯å¦åœ¨å¯¹è±¡åŠå…¶ *[[Prototype]]* åŸå‹é“¾ä¸Š

- *hasOwnProperty( )* æ–¹æ³• â€”â€” æ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨äºå¯¹è±¡æœ¬èº«ä¸­ï¼Œä¸ä¼šæ£€æŸ¥ *[[Prototype]]* åŸå‹é“¾


#### æ£€æŸ¥å±æ€§æ˜¯å¦å¯æšä¸¾

- *Object.prototype.propertyIsEnumerable( )* æ–¹æ³•
    
    - è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŒ‡å®šçš„å±æ€§æ˜¯å¦æ˜¯å¯¹è±¡çš„å¯æšä¸¾è‡ªæœ‰å±æ€§
    
    - å±æ€§åæ˜¯å¦ç›´æ¥å­˜åœ¨äºå¯¹è±¡
    
    - æ˜¯å¦æ»¡è¶³ *enumerable: true*



#### è¿”å›å±æ€§æ•°ç»„

- *Object.keys( )* â€”â€” è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å¯¹è±¡ç›´æ¥åŒ…å«çš„å¯æšä¸¾å±æ€§

- *Object.getOwnPropertyNames( )* â€”â€” è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å¯¹è±¡ç›´æ¥åŒ…å«çš„å±æ€§ï¼Œæ— è®ºæ˜¯å¦å¯æšä¸¾

- *Object.getOwnPropertySymbols( )* â€”â€” è¿”å›å¯¹è±¡å®ä¾‹çš„ç¬¦å·å±æ€§æ•°ç»„

- *Object.getOwnPropertyDescriptors( )* â€”â€” ä¼šè¿”å›åŒæ—¶åŒ…å«å¸¸è§„å’Œç¬¦å·å±æ€§æè¿°ç¬¦çš„å¯¹è±¡



#### å±æ€§æšä¸¾é¡ºåº

- *for-in* å¾ªç¯å’Œ *Object.keys()* çš„æšä¸¾é¡ºåºæ˜¯ä¸ç¡®å®šçš„

- *Object.getOwnPropertyNames( )*ã€*Object.getOwnPropertySymbols( )*ã€*Object.assign( )* çš„æšä¸¾é¡ºåºæ˜¯ç¡®å®šæ€§çš„

    ```js
    let k1 = Symbol('k1')
    let k2 = Symbol('k2')

    let o = {
        1:1,
        first:'first',
        [k1]:'sym2',
        second:'second',
        0:0
    }

    o[k2] = 'sym2'
    o[3] = 3
    o.thrid = 'third'
    o[2] = 2

    console.log(Object.getOwnPropertyNames(o))
    // ["0", "1", "2", "3", "first", "second", "thrid"]
    console.log(Object.getOwnPropertySymbols(o))
    // [Symbol(k1), Symbol(k2)]
    ```

#### å¯¹è±¡è¿­ä»£

*ECMAScript 2017* æ–°å¢äº†ä¸¤ä¸ªé™æ€æ–¹æ³•ç”¨äºå°†å¯¹è±¡å†…å®¹è½¬åŒ–ä¸ºåºåˆ—åŒ–çš„å¯è¿­ä»£çš„æ ¼å¼

- *Object.values( )* è¿”å›å¯¹è±¡å€¼çš„æ•°ç»„
- *Object.entries( )* è¿”å›é”®å€¼å¯¹çš„æ•°ç»„

```js
const o = {
    foo: 'bar',
    baz: 1,
    qux: {}
}

console.log(Object.values(o))
// ["bar", 1, {â€¦}]

console.log(Object.entries(o))
// [["foo", "bar"],["baz", 1],["qux", {â€¦}]]
```

éå­—ç¬¦ä¸²å±æ€§ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¾“å‡ºï¼›è¿™ä¸¤ä¸ªæ–¹æ³•æ‰§è¡Œå¯¹è±¡çš„æµ…å¤åˆ¶

```js
const o = {
    qux: {}
}

console.log(Object.values(o)[0] === o.qux)// true
console.log(Object.entries(o)[0][1] === o.qux)// true
```

ç¬¦å·å±æ€§ä¼šè¢«å¿½ç•¥ï¼š

```js
const sym = Symbol()
const o = {
    [sym]: 'foo'
}
console.log(Object.values(o))// []
console.log(Object.entries(o))// []
```

## å¯¹è±¡æ ‡è¯†åŠç›¸ç­‰åˆ¤å®š

*ES6* æ–°å¢äº† *Object.is( )* æ¥æ”¹å–„ *===* æ“ä½œç¬¦çš„å±€é™æ€§

```js
console.log(Object.is(true, 1))// false
console.log(Object.is({}, {}))// false
console.log(Object.is("2", 2))// false

console.log(Object.is(+0, -0))// false
console.log(Object.is(+0, 0))// true
console.log(Object.is(-0, 0))// false

console.log(Object.is(NaN, NaN))// true
```

è¦æ£€æŸ¥è¶…è¿‡ä¸¤ä¸ªå€¼ï¼Œé€’å½’åœ°åˆ©ç”¨ç›¸ç­‰æ€§ä¼ é€’å³å¯

```js
function recursiveCheckEqual(x, ...rest){
    return Object.is(x, rest[0]) && (rest.length < 2 || recursiveCheckEqual(...rest))
}
```



## å¢å¼ºçš„å¯¹è±¡è¯­æ³•

#### å±æ€§å€¼ç®€å†™

ç®€å†™å±æ€§ååªè¦ä½¿ç”¨å˜é‡åï¼ˆä¸ç”¨å†å†™å†’å·ï¼‰å°±ä¼šè‡ªåŠ¨è¢«è§£é‡Šä¸ºåŒåçš„å±æ€§é”®

```js
let name = 'Matt'
let person = {name}
// ç­‰åŒäº person = {name: name}

console.log(person)// {name: "Matt"}
```

#### å¯è®¡ç®—å±æ€§

æœ‰äº†å¯è®¡ç®—å±æ€§ï¼Œå°±å¯ä»¥åœ¨å¯¹è±¡å­—é¢é‡ä¸­å®ŒæˆåŠ¨æ€å±æ€§èµ‹å€¼

```js
const nameKey = 'name'
const ageKey = 'age'
const jobKey = 'job'
let uniqueToken = 0

function getUniqueKey(key){
    return '${key}_${uniqueToken++}'
}

let person = {
    [getUniqueKey(nameKey)]: 'Matt',
    [getUniqueKey(ageKey)]: 27,
    [getUniqueKey(jobKey)]: 'Software engineer'
}
console.log(person)// {name_0: "Matt", age_1: 27, job_2: "Software engineer"}
```

å¯è®¡ç®—å±æ€§è¡¨è¾¾å¼ä¸­æŠ›å‡ºä»»ä½•é”™è¯¯éƒ½ä¼šä¸­æ–­å¯¹è±¡çš„åˆ›å»ºï¼›ä¹‹å‰å®Œæˆçš„è®¡ç®—æ— æ³•å›æ»š

#### ç®€å†™æ–¹æ³•å

```js
const person = {
    name_: '',
    get name(){
        return this.name_
    }
    set name(name){
        this.name_ = name
    }
    sayName(){
        console.log(this.name)
    }
}
```

ç®€å†™æ–¹æ³•åä¸è®¡ç®—å±æ€§é”®ç›¸äº’å…¼å®¹

```js
const methodKey = 'sayName'

let person = {
    [methodKey](name){
        console.log(name)
    }
}
```

## å¯¹è±¡è§£æ„

å¯¹è±¡è§£æ„ä½¿ç”¨ä¸å¯¹è±¡åŒ¹é…çš„ç»“æ„æ¥å®ç°å¯¹è±¡å±æ€§èµ‹å€¼

```js
let person = {
    name: "Matt",
    age: 27
}

let { name: personName, age: personAge} = person

console.log(personName)// Matt
console.log(personAge)// 27
```

å¯ä»¥ä½¿ç”¨ç®€å†™è¯­æ³•

```js
let person = {
    name: "Matt",
    age: 27
}

let { name, age} = person
// å£°æ˜å˜é‡ name å’Œ age å¹¶å¯¹å…¶è¿›è¡Œèµ‹å€¼

console.log(name)// Matt
console.log(age)// 27
```

å¦‚æœå¼•ç”¨çš„å±æ€§ä¸å­˜åœ¨ï¼Œåˆ™è¯¥å˜é‡çš„å€¼ä¸º*undefined*

```js
let person = {
    name: "Matt",
    age: 27
}

let { name, job} = person

console.log(name)// Matt
console.log(job)// undefined
```

ä¹Ÿå¯ä»¥åœ¨è§£æ„èµ‹å€¼çš„åŒæ—¶å®šä¹‰é»˜è®¤å€¼ï¼Œé€‚ç”¨äºå¼•ç”¨çš„å±æ€§ä¸å­˜åœ¨äºæºå¯¹è±¡ä¸­çš„æƒ…å†µ

```js
let person = {
    name: "Matt",
    age: 27
}

let { name, job = 'Software engineer'} = person

console.log(name)// Matt
console.log(job)// Software engineer
```

è§£æ„åœ¨å†…éƒ¨ä½¿ç”¨å‡½æ•° *ToObject( )* æŠŠæºæ•°æ®ç»“æ„è½¬æ¢ä¸ºå¯¹è±¡ï¼›*null* å’Œ *undefined* ä¸èƒ½è¢«è§£æ„

```js
let { length } = 'foobar'
console.log(length)// 6

let { constructor:c } = 4
console.log(c === Number)// true

let { _ } = null// TypeError
let { _ } = undefined// TypeError
```

å¦‚æœæ˜¯ç»™äº‹å…ˆå£°æ˜çš„å˜é‡èµ‹å€¼ï¼Œåˆ™èµ‹å€¼è¡¨è¾¾å¼å¿…é¡»åŒ…å«åœ¨ä¸€å¯¹æ‹¬å·ä¸­

```js
let personName, personAge
let person = {
    name: "Matt",
    age: 27
}

({name: personName, age: personAge} = person)

console.log(personName)// Matt
console.log(personAge)// 27
```

#### åµŒå¥—è§£æ„

è§£æ„å¯¹äºå¼•ç”¨åµŒå¥—çš„å±æ€§æˆ–èµ‹å€¼ç›®æ ‡æ²¡æœ‰é™åˆ¶

```js
let person = {
    name: "Matt",
    age: 27,
    job:{
        title:"Software engineer"
    }
}
let personCopy = {}

({name: personCopy.name, age:personCopy.age, job: personCopy.job} = person)

person.job.title = "Hacker"

console.log(person)// {name: "Matt", age: 27,job: {title: "Hacker"}}
console.log(personCopy)// {name: "Matt", age: 27,job: {title: "Hacker"}}**
```

è§£æ„èµ‹å€¼å¯ä»¥ä½¿ç”¨åµŒå¥—ç»“æ„ä»¥åŒ¹é…åµŒå¥—çš„å±æ€§

```js
let person = {
    name: "Matt",
    age: 27,
    job:{
        title:"Software engineer"
    }
}

// å£°æ˜titleå˜é‡å¹¶å°†person.job.titleçš„å€¼èµ‹ç»™å®ƒ
let { job: { title } } = person

console.log(title)// Software engineer
```

åœ¨å¤–å±‚æ²¡æœ‰å®šä¹‰çš„æƒ…å†µä¸‹ä¸èƒ½ä½¿ç”¨åµŒå¥—ç»“æ„

```js
let person = {
    job:{
        title:"Software engineer"
    }
}
let personCopy = {}

// fooåœ¨æºå¯¹è±¡ä¸Šæ˜¯undefined
({foo: {bar: personCopy.bar}} = person)// TypeError
```

#### éƒ¨åˆ†è§£æ„

æ¶‰åŠå¤šä¸ªå±æ€§çš„èµ‹å€¼è§£æ„æ˜¯ä¸€ä¸ªè¾“å‡ºæ— å…³çš„é¡ºåºè¯æ“ä½œ

å¦‚æœä¸€ä¸ªè§£æ„è¡¨è¾¾å¼æ¶‰åŠå¤šä¸ªèµ‹å€¼ï¼Œå¼€å§‹çš„èµ‹å€¼æˆåŠŸè€Œåé¢çš„èµ‹å€¼å‡ºé”™ï¼Œåˆ™æ•´ä¸ªè§£æ„èµ‹å€¼åªä¼šå®Œæˆä¸€éƒ¨åˆ†

```js
let person = {
    name: "Matt",
    age: 27,
}
let personName, personAge, personBar

try{
    // fooåœ¨æºå¯¹è±¡ä¸Šæ˜¯undefined,å› æ­¤ä¼šæŠ›å‡ºé”™è¯¯
    ({
        name: personName, 
        foo: personBar, 
        age: personAge
    } = person)
}catch(e){
    // 
}

// Matt,undefined,undefined
console.log(personName, personAge, personBar)
```

#### å‚æ•°ä¸Šä¸‹æ–‡åŒ¹é…

åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­ä¹Ÿå¯ä»¥è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œä¸”ä¸ä¼šå½±å“ *arguments* å¯¹è±¡ï¼Œä½†å¯ä»¥åœ¨å‡½æ•°ç­¾åä¸­å£°æ˜åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨å±€éƒ¨å˜é‡

```js
let person = {
    name: "Matt",
    age: 27,
}

function printPerson(foo, {name, age}, bar){
    console.log(arguments)
    console.log(name, age)
}

function printPerson2(foo, {name: personName, age: personAge}, bar){
    console.log(arguments)
    console.log(personName, personAge)
}

printPerson("1st", person ,"2nd")
/*
0: "1st"
1: {name: "Matt", age: 27}
2: "2nd"
*/
// Matt 27
printPerson2("1st",person,"2nd")
/*
0: "1st"
1: {name: "Matt", age: 27}
2: "2nd"
*/
// Matt 27
```
